<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:http="http://www.mulesoft.org/schema/mule/http" xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core"
	xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd">
	<http:request-config name="HTTP_Request_configuration" doc:name="HTTP Request configuration" doc:id="fd46f16e-0967-4564-9c32-360ea3689f98" />
	<sub-flow name="subflow-create-customerSub_Flow" doc:id="1fc8eaf4-7d24-48f6-8f71-f9023e551ba3" >
		<ee:transform doc:name="create-customer-message" doc:id="a7963a4c-0b64-4a1d-91c6-f002348c8f6c" >
			<ee:message >
				<ee:set-payload ><![CDATA[%dw 2.0
output application/json
---
{
	customerRefNumber : payload.customerDetails.firstName ++ now() as Number {unit: "milliseconds"},
	firstName : payload.customerDetails.firstName,
	lastName : payload.customerDetails.lastName,
	city : payload.customerDetails.city,
	state: payload.customerDetails.state
}]]></ee:set-payload>
			</ee:message>
		</ee:transform>
		<set-variable value="#[payload.customerRefNumber]" doc:name="Set Variable" doc:id="62cf1ac1-6959-4c4c-8ed0-3c81b7db1bec" variableName="customerRefNumber"/>
		<http:request method="GET" doc:name="Request" doc:id="288bc68f-b4fa-494a-970d-0b33051d0d43" config-ref="HTTP_Request_configuration" url="http://flight-management-sys-api-navneet.us-e2.cloudhub.io/api/flights"/>
	</sub-flow>
</mule>
